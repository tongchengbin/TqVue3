(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21dd6ade"],{5397:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{staticStyle:{width:"200px"},model:{value:t.listQuery.search,callback:function(e){t.$set(t.listQuery,"search",e)},expression:"listQuery.search"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"支付状态"},model:{value:t.listQuery.is_pay,callback:function(e){t.$set(t.listQuery,"is_pay",e)},expression:"listQuery.is_pay"}},t._l(t.paytype,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleSearch}},[t._v("搜索")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("添加")])],1)],1)],1),a("div",{attrs:{align:"center"}},[a("el-table",{attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{align:"center",prop:"user_info.username",label:"操作人",width:"150px"}}),a("el-table-column",{attrs:{align:"center",prop:"order_num",label:"数量",width:"80px"}}),a("el-table-column",{attrs:{align:"center",prop:"completed",label:"已完成",width:"80px"}}),a("el-table-column",{attrs:{align:"center",prop:"order_price",label:"金额",width:"80px"}}),a("el-table-column",{attrs:{align:"center",prop:"pay_type",label:"支付方式",width:"90px"}}),a("el-table-column",{attrs:{align:"center",prop:"source",label:"来源",width:"90px"}}),a("el-table-column",{attrs:{align:"center",label:"申请时间",width:"190px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.ctime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{align:"center",label:"支付",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_pay?a("span",{staticStyle:{color:"#409eff"}},[t._v("已支付")]):a("strong",{staticStyle:{color:"#909399"}},[t._v("待支付")])]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{align:"center",label:"Actions",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){return t.handleTask(e.row)}}},[t._v("任务")]),a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(a){return t.handleUpdate(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-edit"},on:{click:function(a){return t.handleDelete(e.row,e.$index)}}},[t._v("删除")])]}}])})],1)],1),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"分享连接",prop:"url"}},[a("el-input",{model:{value:t.temp.url,callback:function(e){t.$set(t.temp,"url",e)},expression:"temp.url"}})],1),a("el-form-item",{attrs:{label:"数量",prop:"order_num"}},[a("el-input-number",{model:{value:t.temp.order_num,callback:function(e){t.$set(t.temp,"order_num",e)},expression:"temp.order_num"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:t.temp.remark,callback:function(e){t.$set(t.temp,"remark",e)},expression:"temp.remark"}})],1),a("el-form-item",{attrs:{label:"支付状态"}},[a("el-switch",{model:{value:t.temp.is_pay,callback:function(e){t.$set(t.temp,"is_pay",e)},expression:"temp.is_pay"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")]),"create"==t.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updateData}},[t._v("更新")])],1)],1),a("el-dialog",{attrs:{visible:t.taskFormVisible,"custom-class":"dialog-task"},on:{"update:visible":function(e){t.taskFormVisible=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.taskdata,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"180"}}),a("el-table-column",{attrs:{label:"索取结果"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_ok?a("el-button",{attrs:{type:"primary"}},[t._v("索取成功")]):a("el-button",{attrs:{type:"warning"}},[t._v("索取失败")])]}}])}),a("el-table-column",{attrs:{prop:"msg",label:"执行消息",width:"msg"}}),a("el-table-column",{attrs:{width:"180px",align:"center",label:"申请时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.ctime,"{y}-{m}-{d} {h}:{i}")))])]}}])}),a("el-table-column",{attrs:{width:"180px",align:"center",label:"执行时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.mtime,"{y}-{m}-{d} {h}:{i}")))])]}}])})],1)],1)],1)},i=[],n=a("e876"),s=a("d060"),r=a("e692"),o={name:"goodsedit",data:function(){return{task_params:{order:null},taskdata:[],taskFormVisible:!1,list:[],total:null,listQuery:{search:null,is_pay:null,page:1,pagesize:10},ialogStatus:null,textMap:{update:"Edit",create:"Create"},dialogFormVisible:!1,dialogStatus:null,temp:{url:null,is_pay:null,order_num:null},paytype:[{value:"1",label:"已支付"},{value:"0",label:"待支付"}]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;n["a"].get(s["a"].SHOP_QIAOHUORSER_LIST,this.listQuery).then(function(e){t.list=e.data.results,t.total=e.data.count})},updateData:function(){var t=this;n["a"].put(s["a"].SHOP_QIAOHUORSER_PK,this.temp,this.temp.id).then(function(e){200===e.status?t.$message({message:"操作成功",type:"success"}):t.$message({message:"操作失败",type:"warinning"}),t.dialogFormVisible=!1,t.fetchData()})},createData:function(){var t=this;n["a"].post(s["a"].SHOP_QIAOHUORSER_LIST,this.temp).then(function(e){t.$message({message:"添加成功",type:"success"}),t.dialogFormVisible=!1,t.fetchData()})},handleTask:function(t){var e=this;this.taskFormVisible=!0,this.task_params.order=t.id,n["a"].get(s["a"].SHOP_QIAOHUTASK_LIST,this.task_params).then(function(t){e.taskdata=t.data.results})},handleCreate:function(){this.dialogStatus="create",this.dialogFormVisible=!0},handleSearch:function(){this.fetchData()},handleCurrentChange:function(t){this.listQuery.offset=t*this.listQuery.limit-this.listQuery.limit,this.fetchData()},handleSizeChange:function(t){this.listQuery.pagesize=t,this.fetchData()},handleUpdate:function(t){this.dialogFormVisible=!0,this.temp=t},handleDelete:function(t,e){var a=this;Object(r["a"])(t).then(function(t){a.$message({message:"删除成功",type:"success"})}),this.list.splice(e,1)}}},c=o,u=(a("82f3"),a("fc05")),p=Object(u["a"])(c,l,i,!1,null,null,null);e["default"]=p.exports},"82f3":function(t,e,a){"use strict";var l=a("c311"),i=a.n(l);i.a},c311:function(t,e,a){},e692:function(t,e,a){"use strict";a.d(e,"a",function(){return i});var l=a("b775");function i(t){return Object(l["a"])({url:"/api/admin/qiaohuorder/"+t.id+"/",method:"delete",data:t})}}}]);