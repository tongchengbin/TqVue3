(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49da1eaf"],{"410d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("imp-panel",[a("h3",{staticClass:"box-title",staticStyle:{width:"100%"},attrs:{slot:"header"},slot:"header"},[a("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.newAdd}},[e._v("新增")])],1),a("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{slot:"body",gutter:24},slot:"body"},[a("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{span:5,xs:24,sm:24,md:6,lg:4}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.leftTree.loading,expression:"leftTree.loading"}],attrs:{data:e.leftTree.roleTree,"node-key":"id","highlight-current":"","default-expand-all":"",props:e.defaultProps},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,o=t.data;return a("div",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(l.label))]),a("span",{staticClass:"render-content"},[a("i",{staticClass:"fa fa-wrench",attrs:{title:"配置权限"},on:{click:function(t){return e.configRole(o.id)}}}),a("i",{staticClass:"fa fa-trash",on:{click:function(t){return e.deleteMenu(o.id)}}})])])}}])})],1),a("el-col",{attrs:{span:18,xs:24,sm:24,md:18,lg:18}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-form",{ref:"form",attrs:{model:e.leftTree.form}},[a("el-form-item",{attrs:{label:"父级","label-width":e.formLabelWidth}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.leftTree.form.parent_id,callback:function(t){e.$set(e.leftTree.form,"parent_id",t)},expression:"leftTree.form.parent_id"}},e._l(e.menuOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.nodes,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.leftTree.form.name,callback:function(t){e.$set(e.leftTree.form,"name",t)},expression:"leftTree.form.name"}})],1),a("el-form-item",{attrs:{label:"key","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.leftTree.form.key,callback:function(t){e.$set(e.leftTree.form,"key",t)},expression:"leftTree.form.key"}})],1),a("el-form-item",{attrs:{label:"是否生效","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.leftTree.form.is_active,callback:function(t){e.$set(e.leftTree.form,"is_active",t)},expression:"leftTree.form.is_active"}})],1),a("el-form-item",{attrs:{label:"仅超管可见","label-width":e.formLabelWidth}},[a("el-switch",{model:{value:e.leftTree.form.only_superuser,callback:function(t){e.$set(e.leftTree.form,"only_superuser",t)},expression:"leftTree.form.only_superuser"}})],1),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary"},domProps:{textContent:e._s(e.leftTree.form.id?"保存":"新增")},on:{click:e.onSubmit}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.leftTree.form.id&&null!=e.leftTree.form.id,expression:"leftTree.form.id && leftTree.form.id!=null"}],attrs:{type:"info",icon:"setting"},on:{click:function(t){return e.configRole(e.leftTree.form.id)}}},[e._v("配置角色\n                ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.leftTree.form.id&&null!=e.leftTree.form.id,expression:"leftTree.form.id && leftTree.form.id!=null"}],attrs:{type:"danger",icon:"delete"},on:{click:function(t){return e.deleteMenu(e.leftTree.form.id)}}},[e._v("删除")])],1)],1)],1)])],1)],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],attrs:{title:"配置角色",visible:e.roleData.dialogVisible,width:"30%"}},[a("div",{staticClass:"select-tree"},[a("el-scrollbar",{staticClass:"is-empty",attrs:{tag:"div","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.roleData.loading,expression:"roleData.loading"}],ref:"roleTree",attrs:{data:e.roleData.data,"show-checkbox":"","default-checked-keys":e.roleData.checkedRole,"node-key":"id","default-expand-all":!0,props:e.defaultProps}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleData.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitRole}},[e._v("确 定")])],1)])],1)},o=[],r=a("ded0"),i=a("e876"),n=a("d060"),s={components:{"imp-panel":r["a"]},data:function(){return{leftTree:{roleTree:[],loading:!1,form:{id:null,parent_id:null,label:"",key:"",only_superuser:!1,is_active:!0}},roleData:{dialogVisible:!1,loading:!1,data:[],checkedRole:[]},menuOptions:[],formLabelWidth:"100px",defaultProps:{children:"children",label:"name",id:"id"},MenuTree:[],maxId:7e5}},methods:{changeParentMenu:function(e){},configRole:function(e){var t=this;console.log(),this.roleData.currentMenuId=e,this.roleData.loading=!0;var a={menu:e};i["a"].get(n["a"].ACCOUNT_ROLE_TREE,a).then(function(e){t.roleData.data=e.data.data,t.roleData.checkedRole=e.data.has_role,t.roleData.loading=!1,t.roleData.dialogVisible=!0})},onSubmitRole:function(){var e=this,t=this.$refs.roleTree.getCheckedKeys();this.roleData.loading=!0,i["a"].post(n["a"].ACCOUNT_MENU_SET_ROLE,{data:t},this.roleData.currentMenuId).then(function(t){e.roleData.dialogVisible=!1,e.roleData.loading=!1})},handleNodeClick:function(e){this.leftTree.form=e},newAdd:function(){this.leftTree.form={id:null,parent_id:null,name:""}},selectclear:function(){console.log("cleart")},onSubmit:function(){var e=this;this.leftTree.form.id?i["a"].put(n["a"].ACCOUNT_MENU_PK,this.leftTree.form,this.leftTree.form.id).then(function(t){e.featchData()}):i["a"].post(n["a"].ACCOUNT_MENU_LIST,this.leftTree.form).then(this.featchData())},deleteMenu:function(e){var t=this;this.leftTree.loading=!0,i["a"].delete(n["a"].ACCOUNT_ROLE_PK,e).then(function(e){t.$message("已删除"),t.featchData()}).catch(function(e){})},featchData:function(){var e=this;this.leftTree.loading=!0,i["a"].get(n["a"].ACCOUNT_MENU_TREE_LIST,{}).then(function(t){e.leftTree.roleTree=t.data,e.leftTree.loading=!1})},getAllMenu:function(){var e=this;i["a"].get(n["a"].ACCOUNT_MENU_LIST,{}).then(function(t){e.menuOptions=t.data.data})},settingResource:function(e){var t=this;this.roleData.pk=e,this.roleData.loading=!0,this.roleData.dialogVisible=!0,i["a"].get(n["a"].ACCOUNT_MENU_TREE,{role:e}).then(function(e){t.roleData.data=e.data.results,t.roleData.checkMenu=e.data.hasmenu,t.roleData.loading=!1})}},created:function(){this.featchData(),this.getAllMenu()}},d=s,c=(a("b3f4"),a("fc05")),f=Object(c["a"])(d,l,o,!1,null,null,null);t["default"]=f.exports},"4b3e":function(e,t,a){"use strict";var l=a("c1c3"),o=a.n(l);o.a},7822:function(e,t,a){},b3f4:function(e,t,a){"use strict";var l=a("7822"),o=a.n(l);o.a},c1c3:function(e,t,a){},ded0:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[e.title||e.$slots.header?a("div",{staticClass:"box-header",class:{"with-border":e.widthBorder}},[e._t("header",[e.title?a("h3",{staticClass:"box-title",domProps:{textContent:e._s(e.title)}}):e._e()])],2):e._e(),a("div",{staticClass:"box-body"},[e.$slots.body?e._t("body",[e._v("\n            暂无内容显示\n        ")]):e._t("default")],2),e.footer?a("div",{staticClass:"box-footer",domProps:{textContent:e._s(e.footer)}}):e._e()])},o=[],r={name:"ImpPanel",props:{widthBorder:{type:Boolean},title:{type:String},footer:{type:String}}},i=r,n=(a("4b3e"),a("fc05")),s=Object(n["a"])(i,l,o,!1,null,"ead89f6e",null);t["a"]=s.exports}}]);